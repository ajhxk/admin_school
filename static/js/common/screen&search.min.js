// JavaScript Document
$(function () {

    //1 仿select下拉框

    // 向下箭头
    $("body").delegate(".common_select_img","click",function (event) {
        if ($(this).attr("disabled")) {
            return false;
        }
        event.stopPropagation();
        var tar =  $(this).parent().next(".common_select_ul");
        tar.slideToggle();
        doSlideUpExcept($('.common_select_ul'),tar)
    });
    $("body").delegate(".common_select li","mousedown",function(){
        var $text = $(this).text();
        var $option = $(this).attr('data-option');
        $(this).parent().prev(".common_top_select").find(".common_select_type").text($text).attr('data-option', $option).css("color", "#999").trigger('change');
        $(this).parent(".common_select_ul").slideUp();
    });


    //向下箭头hover效果
    $(".common_select_img").hover(function () {
        $(this).addClass('common_select_btn').removeClass('common_select_btn1');
    }, function () {
        $(this).addClass('common_select_btn1').removeClass('common_select_btn');
    });

    //点击其他地方ul消失
    $(document).bind("click", function (e) {
        var target = $(e.target);
        if (target.closest(".common_select_ul").length == 0) {
            $(".common_select_ul").slideUp();
        }
    });

    //2 搜索框效果

    //搜索按钮hover
    $(".common_search_btn").hover(
        function () {
            $(this).addClass('common_btn_pic').removeClass('common_btn_pic1');
        },
        function () {
            $(this).addClass('common_btn_pic1').removeClass('common_btn_pic');
        }
    );


    //input获得焦点，文字改变颜色
    $(".common_input_search").focus(function () {
        $(this).css("color", "#333");
    });
    //input失去焦点，文字改变颜
    $(".common_input_search").blur(function () {
        $(this).css("color", "#999");
    });
    //3 年月日
    $(".common_time_main").mouseenter(function () {
        $(this).prev(".common_time_bg").show();
    });
    $(".common_time_box").mouseleave(function () {
        $(this).find(".common_time_bg").hide();
    });
    //确定按钮变色
    $(".common_timeqd_btn").hover(
        function () {
            $(this).css("background-color", "#4cc8de");
        },
        function () {
            $(this).css("background-color", "#1fbad6");
        }
    );
    $(".common_time_left").find("input").blur(function () {
        $(this).css("color", "#999");
    });

    $("body").delegate(".common_top_select","click",function (event) {
        if ($(this).find('.common_select_img').attr("disabled")) {
            return false;
        }
        event.stopPropagation();
        var tar = $(this).next(".common_select_ul");
        tar.slideToggle();
        doSlideUpExcept($('.common_select_ul'),tar);
    });


    function doSlideUpExcept(tarArray,tar){
        var index = tarArray.index(tar);
        for(var i=0;i<tarArray.length;i++){
            if(i==index){continue};
            tarArray.eq(i).slideUp();
        }
    };
});